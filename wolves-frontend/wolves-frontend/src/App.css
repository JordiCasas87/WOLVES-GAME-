/* contenedor base de TODAS las pantallas */
.screen {
  min-height: 100vh;
  min-height: 100dvh;
  width: 100%;
  box-sizing: border-box;

  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  text-align: center;
  padding: 24px;
}

.screen--footer-reserve {
  --footer-reserve: 64px;
  padding-bottom: calc(24px + var(--footer-reserve));
  padding-bottom: calc(24px + var(--footer-reserve) + env(safe-area-inset-bottom));
}

/* layout de Login */
.login-screen {
  position: relative;
  overflow: hidden;
  isolation: isolate;
  background-image: url("./assets/images/pasillocentral.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  /* Palette pulled from pasillo.png (greens/teals + stone) */
  --login-accent: #346c5c;
  --login-accent-hover: #3b7a68;
  --login-ink: #f5f6f2;
  --login-surface: rgba(26, 38, 38, 0.86);
  --login-surface-2: rgba(24, 32, 28, 0.78);
  --login-border: rgba(100, 116, 100, 0.32); /* #647464 */
}

.login-screen > .login-bg {
  position: absolute;
  inset: 0;
  z-index: 0;
  overflow: hidden;
}

.login-bg-video {
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transform: scale(1.02);
  filter: saturate(1.05) contrast(1.02);
}

.login-bg-geld-money {
  position: absolute;
  z-index: 1;
  left: 0;
  top: 0;
  width: clamp(72px, 8.5vw, 120px);
  height: auto;
  opacity: 0.92;
  filter: drop-shadow(0 12px 20px rgba(0, 0, 0, 0.35));
  transform: translate3d(var(--from-x, 0), var(--from-y, 0), 0) rotate(var(--money-rot, 0deg))
    scaleX(var(--money-flip-x, 1)) scale(var(--money-scale, 1));
  animation: loginGeldMoneyFly var(--money-duration, 9000ms) linear forwards;
  pointer-events: auto;
  cursor: pointer;
  touch-action: manipulation;

  border: 0;
  padding: 0;
  background: transparent;
}

.login-bg-geld-money > img {
  display: block;
  width: 100%;
  height: auto;
}

.login-money-counter-btn {
  position: fixed;
  left: 50%;
  bottom: calc(10px + env(safe-area-inset-bottom) + 32px);
  z-index: 3;

  width: clamp(140px, 22vw, 230px);
  aspect-ratio: 1696 / 608;
  display: grid;
  place-items: center;

  font-family: var(--font-body);
  font-size: 12px;
  letter-spacing: 0.08em;
  color: rgba(245, 246, 242, 0.92);
  text-shadow: 0 2px 14px rgba(0, 0, 0, 0.9);
  opacity: 0.9;

  pointer-events: none;
  user-select: none;
  transform: translate3d(-50%, 0, 0);

  border: 0;
  padding: 0;
  background-color: transparent;
  background-image: url("./assets/images/contador.png");
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.25);
}

@media (min-width: 900px) {
  .login-money-counter-btn {
    width: 120px;
  }
}

@keyframes loginGeldMoneyFly {
  0% {
    transform: translate3d(var(--from-x, 0), var(--from-y, 0), 0) rotate(var(--money-rot, 0deg))
      scaleX(var(--money-flip-x, 1)) scale(var(--money-scale, 1));
  }
  100% {
    transform: translate3d(var(--to-x, 120vw), var(--to-y, 0), 0) rotate(var(--money-rot, 0deg))
      scaleX(var(--money-flip-x, 1)) scale(var(--money-scale, 1));
  }
}

@media (prefers-reduced-motion: reduce) {
  .login-screen > .login-bg {
    display: none;
  }
}

.login-screen > * {
  position: relative;
  z-index: 2;
}

.login-screen > .login-money-counter-btn {
  position: fixed;
  z-index: 3;
}

@keyframes loginUiIn {
  from {
    opacity: 0;
    transform: translate3d(0, 10px, 0);
  }
  to {
    opacity: 1;
    transform: none;
  }
}

.login-ui-enter {
  animation: loginUiIn 520ms ease both;
}

@media (prefers-reduced-motion: reduce) {
  .login-ui-enter {
    animation: none;
  }
}

.plano-screen {
  --plano-pad: clamp(12px, 3vw, 24px);
  position: relative;
  overflow: hidden;
  isolation: isolate;
  background: #000;
  display: grid;
  grid-template-rows: auto minmax(0, 1fr) auto;
  justify-items: center;
  align-items: center;
  gap: 14px;
  padding: var(--plano-pad);
  height: 100vh;
  height: 100svh;
}

.plano-screen::before {
  content: "";
  position: absolute;
  inset: -10%;
  z-index: 0;
  pointer-events: none;

  /* Reuse login backdrop, but blurred */
  background-image: url("./assets/images/pasillocentral.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  filter: blur(10px) saturate(1.05);
  transform: scale(1.05);
}

.plano-screen::after {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  background: rgba(0, 0, 0, 0.38);
}

.plano-message {
  position: relative;
  z-index: 2;

  margin: 0;
  padding: 10px 12px;
  width: fit-content;
  max-width: calc(100vw - (var(--plano-pad) * 2));
  text-align: center;

  font-family: var(--font-display);
  font-weight: 900;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  font-size: clamp(10px, 2vw, 16px);
  line-height: 1.2;
  color: rgba(245, 246, 242, 0.92);
  text-shadow: 0 2px 14px rgba(0, 0, 0, 0.9);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  background: rgba(0, 0, 0, 0.35);
  border: 1px solid rgba(245, 246, 242, 0.16);
  border-radius: 999px;

  pointer-events: none;
  user-select: none;
}

.plano-card {
  width: fit-content;
  max-width: min(92vw, 760px);
  max-height: 100%;
  padding: 0;
  border: none;
  background: transparent;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 22px 70px rgba(0, 0, 0, 0.7);
  position: relative;
  z-index: 1;
}

.plano-enter-hit {
  position: absolute;
  inset: 0;
  z-index: 3;
  border: none;
  background: transparent;
  cursor: pointer;
}

.plano-enter-hit:focus-visible {
  outline: 3px solid rgba(255, 216, 120, 0.55);
  outline-offset: -6px;
}

.plano-back-btn {
  position: relative;
  z-index: 2;

  width: fit-content;
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid rgba(245, 246, 242, 0.18);
  background: rgba(0, 0, 0, 0.55);
  color: rgba(245, 246, 242, 0.92);
  font-family: var(--font-display);
  font-weight: 800;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: 12px;
  cursor: pointer;
}

@media (max-width: 480px) {
  .plano-back-btn {
    padding: 9px 12px;
  }
}

.plano-back-btn:hover {
  border-color: rgba(255, 216, 120, 0.45);
  box-shadow: 0 0 0 2px rgba(255, 216, 120, 0.14);
}

.plano-back-btn:focus-visible {
  outline: 3px solid rgba(255, 216, 120, 0.55);
  outline-offset: 4px;
}

.plano-card::before {
  /* Subtle "sparkle" grain */
  content: "";
  position: absolute;
  inset: -20%;
  z-index: 1;
  pointer-events: none;
  opacity: 0.85;
  mix-blend-mode: screen;
  filter: blur(0.15px) brightness(1.15) saturate(1.2);

  background:
    radial-gradient(circle at 12% 18%, rgba(255, 216, 120, 0.34) 0 2.2px, transparent 4px),
    radial-gradient(circle at 26% 66%, rgba(255, 140, 90, 0.3) 0 2px, transparent 4px),
    radial-gradient(circle at 48% 38%, rgba(255, 216, 120, 0.26) 0 1.8px, transparent 4px),
    radial-gradient(circle at 64% 24%, rgba(245, 246, 242, 0.18) 0 1.6px, transparent 4px),
    radial-gradient(circle at 72% 58%, rgba(255, 216, 120, 0.3) 0 2.1px, transparent 4px),
    radial-gradient(circle at 88% 36%, rgba(255, 140, 90, 0.26) 0 1.9px, transparent 4px),
    radial-gradient(circle at 40% 12%, rgba(255, 255, 255, 0.12) 0 1.4px, transparent 4px),
    radial-gradient(circle at 10% 78%, rgba(255, 255, 255, 0.1) 0 1.2px, transparent 4px);

  background-size: 200px 200px;
  animation: planoSparksDrift 6.2s linear infinite, planoSparksTwinkle 1.7s ease-in-out infinite;
}

.plano-card::after {
  /* Gentle illumination sweep */
  content: "";
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  opacity: 0.0;
  mix-blend-mode: screen;
  background:
    radial-gradient(560px 360px at 25% 30%, rgba(255, 216, 120, 0.22), transparent 70%),
    radial-gradient(640px 420px at 78% 22%, rgba(255, 140, 90, 0.16), transparent 74%),
    linear-gradient(120deg, transparent 0%, rgba(255, 255, 255, 0.12) 45%, transparent 70%);
  animation: planoGlowPulse 6.8s ease-in-out infinite;
}

.plano-img {
  width: auto;
  height: auto;
  display: block;
  max-width: min(92vw, 760px);
  max-height: 100%;
  position: relative;
  z-index: 0;
}

@keyframes planoSparksDrift {
  0% {
    transform: translate3d(0, 0, 0);
  }
  100% {
    transform: translate3d(140px, 90px, 0);
  }
}

@keyframes planoSparksTwinkle {
  0%,
  100% {
    opacity: 0.7;
  }
  50% {
    opacity: 1;
  }
}

@keyframes planoGlowPulse {
  0%,
  100% {
    opacity: 0.05;
  }
  50% {
    opacity: 0.22;
  }
}

@media (prefers-reduced-motion: reduce) {
  .plano-card::before,
  .plano-card::after {
    animation: none;
  }
}

.credits-btn {
  width: fit-content;
  margin-left: auto;
  margin-right: auto;
  margin-top: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid rgba(255, 107, 107, 0.55);
  background: rgba(179, 0, 0, 0.8);
  color: #fff;
  font-family: var(--font-display);
  font-weight: 900;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  font-size: 10px;
  cursor: pointer;
  transition: transform 0.2s ease, border-color 0.2s ease, background 0.2s ease;
}

.credits-btn:hover {
  transform: translateY(-1px);
  background: rgba(255, 0, 0, 0.82);
  border-color: rgba(255, 107, 107, 0.75);
}

.credits-btn:active {
  transform: translateY(1px);
}

.credits-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: none;
}

.login-aux-buttons {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.login-aux-buttons .credits-btn {
  margin-top: 0;
  margin-left: 0;
  margin-right: 0;
  text-transform: none;
  font-size: 15px;
  padding: 14px 16px;
  font-family: var(--font-display);
  font-weight: 900;
  letter-spacing: 0.08em;
  line-height: 1.1;
}

.game-btn {
  border-color: rgba(245, 246, 242, 0.28);
  background: rgba(0, 0, 0, 0.78);
  backdrop-filter: blur(2.64px);
  -webkit-backdrop-filter: blur(2.64px);
}

.game-btn:hover {
  background: rgba(0, 0, 0, 0.9);
  border-color: rgba(245, 246, 242, 0.45);
}

.gameinfo-page {
  position: relative;
  justify-content: center;
}

.gameinfo-page .login-bg-video {
  filter: blur(0.5px) saturate(1.05) contrast(1.02);
  position: absolute;
  left: 50%;
  top: 50%;
  width: 110%;
  height: 110%;
  transform: translate(-50%, -50%) scale(0.95, 0.93);
}

.gameinfo-content {
  width: 100%;
  max-width: 720px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
  padding: 10px 0 8px;
}

.gameinfo-text-card {
  width: min(92vw, 640px);
  max-height: min(72vh, 640px);
  overflow: auto;
  padding: 18px 18px;
  border-radius: 18px;
  background: rgba(0, 0, 0, 0.58);
  border: 1px solid rgba(245, 246, 242, 0.18);
  backdrop-filter: blur(8px) saturate(115%);
  -webkit-backdrop-filter: blur(8px) saturate(115%);
  box-shadow: 0 22px 70px rgba(0, 0, 0, 0.7);
}

.gameinfo-heading {
  margin: 0;
  font-family: var(--font-display);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: clamp(16px, 2.2vw, 20px);
}

.gameinfo-text {
  margin: 0;
  font-family: var(--font-body);
  opacity: 0.95;
  line-height: 1.7;
  font-size: 18px;
  letter-spacing: 0.02em;
}

.gameinfo-text + .gameinfo-text {
  margin-top: 10px;
}

.gameinfo-text--em {
  font-family: var(--font-display);
  letter-spacing: 0.06em;
  font-weight: 900;
  font-size: 19px;
}

.credits-page {
  position: relative;
  justify-content: center;
}

.credits-content {
  width: 100%;
  max-width: 720px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
  padding: 10px 0 8px;
}

.credits-text-card {
  width: min(92vw, 640px);
  max-height: min(72vh, 640px);
  overflow: auto;
  padding: 18px 18px;
  border-radius: 18px;
  background: rgba(0, 0, 0, 0.52);
  border: 1px solid rgba(245, 246, 242, 0.16);
  backdrop-filter: blur(8px) saturate(115%);
  -webkit-backdrop-filter: blur(8px) saturate(115%);
  box-shadow: 0 22px 70px rgba(0, 0, 0, 0.7);
  font-family: var(--font-display);

  opacity: 0;
  transform: translateY(6px);
  pointer-events: none;
  transition: opacity 260ms ease-out, transform 260ms ease-out;
}

.credits-text-card--visible {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.credits-lead {
  margin: 0;
  font-family: var(--font-display);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  opacity: 0.95;
  font-size: clamp(16px, 2.2vw, 19px);
  line-height: 1.35;
}

.credits-body {
  margin: 12px 0 0;
  opacity: 0.92;
  font-size: 19px;
  line-height: 1.7;
  letter-spacing: 0.02em;
}

.credits-author {
  margin: 12px 0 0;
  font-family: var(--font-display);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: 20px;
}

.credits-warn-title {
  margin: 14px 0 6px;
  font-family: var(--font-display);
  letter-spacing: 0.06em;
  text-transform: uppercase;
  opacity: 0.95;
  font-size: 16px;
}

.credits-list {
  margin: 0;
  padding-left: 0;
  list-style: none;
  text-align: center;
  opacity: 0.92;
  font-size: 19px;
  line-height: 1.65;
}

.credits-close {
  width: fit-content;
  margin-left: auto;
  margin-right: auto;
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid rgba(245, 246, 242, 0.18);
  background: rgba(0, 0, 0, 0.55);
  color: rgba(245, 246, 242, 0.92);
  font-family: var(--font-display);
  font-weight: 900;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  font-size: 12px;
  cursor: pointer;
}

.credits-close:hover {
  border-color: rgba(52, 108, 92, 0.75);
}

.menu-screen {
  position: relative;
  overflow: hidden;
  isolation: isolate;
  background-image: url("./assets/images/pasillo.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

.menu-screen--softblur::after {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;

  /* Very light blur layer (keeps background readable) */
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);

  /* Small tint so backdrop-filter applies consistently */
  background: rgba(0, 0, 0, 0.03);
}

.menu-stack {
  width: 100%;
  display: grid;
  grid-template-rows: auto auto;
  place-items: center;
  place-content: center;
  gap: 14px;
  padding: 6px 0 2px;

  position: relative;
  z-index: 1;
}

.menu-video-wrap {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}

.menu-video-frame {
  position: relative;
  width: fit-content;
  max-width: 95vw;
}

.menu-note-wrap {
  position: absolute;
  top: -36px;
  right: 2px;
  z-index: 2;
  width: clamp(84px, 14vw, 140px);
  height: auto;
  pointer-events: auto;
  transform: rotate(-13deg);
  container-type: inline-size;
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
}

.menu-layout.menu-layout--floating .menu-silence-btn {
  grid-column: 1 / -1;
  justify-self: center;
  align-self: center;
  width: fit-content;
  max-width: 100%;
  padding: 0;
  border: none;
  background: transparent;
  box-shadow: none;
  border-radius: 0;
  cursor: pointer;
  line-height: 0;
  transition: transform 0.2s ease, opacity 0.2s ease, filter 0.2s ease;
}

.menu-layout.menu-layout--floating .menu-silence-btn:hover {
  transform: translateY(-2px);
}

.menu-layout.menu-layout--floating .menu-silence-btn:active {
  transform: translateY(1px);
}

.menu-layout.menu-layout--floating .menu-silence-btn:focus-visible {
  outline: 3px solid rgba(255, 216, 120, 0.55);
  outline-offset: 6px;
}

.menu-silence-btn-img {
  width: clamp(56px, 9.2vw, 92px);
  height: auto;
  display: block;
  filter: drop-shadow(0 10px 18px rgba(0, 0, 0, 0.55));
}

@media (min-width: 900px) {
  .menu-silence-btn-img {
    width: 64px;
  }
}

.menu-layout.menu-layout--floating .menu-silence-btn[aria-pressed="true"] .menu-silence-btn-img {
  opacity: 0.86;
  filter: drop-shadow(0 10px 18px rgba(0, 0, 0, 0.55)) saturate(0.4) brightness(0.92);
}

.menu-note-img {
  width: 100%;
  height: auto;
  display: block;
  pointer-events: none;
  filter: drop-shadow(0 10px 18px rgba(0, 0, 0, 0.55));
}

.menu-note-wrap:focus-visible {
  outline: 3px solid rgba(255, 216, 120, 0.55);
  outline-offset: 6px;
}

.menu-notes-popover {
  position: fixed;
  inset: 0;
  z-index: 60;
  display: grid;
  place-items: center;
  padding: 24px;
  pointer-events: auto;
  transform: none;
}

.menu-notes-popover::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  background: rgba(0, 0, 0, 0.32);
  backdrop-filter: blur(3px) saturate(115%);
  -webkit-backdrop-filter: blur(3px) saturate(115%);
}

.menu-notes-card {
  position: relative;
  width: clamp(364px, 57vw, 546px);
  z-index: 1;
  container-type: inline-size;
  --notes-rotate: 7deg;
  --notes-rotate-inv: -7deg;
  transform: rotate(var(--notes-rotate));
}

.menu-notes-img {
  width: 100%;
  height: auto;
  display: block;
  pointer-events: none;
  filter: drop-shadow(0 18px 34px rgba(0, 0, 0, 0.55));
}

.menu-notes-header {
  position: absolute;
  top: 16%;
  left: 11%;
  right: auto;
  margin: 0;
  color: rgba(34, 28, 18, 0.92);
  font-family: var(--font-hand);
  font-weight: 700;
  font-size: clamp(16px, 9.6cqw, 24px);
  line-height: 1.1;
  text-align: left;
  transform: rotate(var(--notes-rotate-inv));
  transform-origin: center;
  pointer-events: none;
  user-select: none;
}

.menu-notes-textarea {
  position: absolute;
  inset: 24% 14% 18% 14%;
  padding: 0;
  border: none;
  background: transparent;
  color: rgba(34, 28, 18, 0.92);
  font-family: var(--font-hand);
  font-weight: 600;
  font-size: clamp(16px, 9.6cqw, 24px);
  line-height: 1.3;
  outline: none;
  resize: none;
  text-align: left;
  white-space: pre-line;
  border-radius: 0;
  box-shadow: none;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  transform: rotate(var(--notes-rotate-inv));
  transform-origin: center;
}

.menu-notes-textarea:focus-visible {
  outline: 3px solid rgba(255, 216, 120, 0.55);
  outline-offset: 6px;
}

.menu-notes-close {
  position: absolute;
  top: 8px;
  right: 10px;
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: 1px solid rgba(34, 28, 18, 0.22);
  background: rgba(245, 246, 242, 0.55);
  color: rgba(34, 28, 18, 0.85);
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
}

.menu-notes-close:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.menu-notes-actions {
  position: absolute;
  left: 14%;
  right: 14%;
  bottom: 12%;
  display: flex;
  justify-content: center;
  pointer-events: auto;
  transform: translate(16px, 40px) rotate(var(--notes-rotate-inv));
  transform-origin: center;
}

.menu-notes-save {
  padding: 8px 14px;
  border-radius: 999px;
  border: 1px solid rgba(34, 28, 18, 0.22);
  background: rgba(245, 246, 242, 0.62);
  color: rgba(34, 28, 18, 0.88);
  font-family: var(--font-display);
  font-weight: 800;
  font-size: 12px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  cursor: pointer;
}

.menu-notes-save:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.menu-notes-save:focus-visible {
  outline: 3px solid rgba(255, 216, 120, 0.55);
  outline-offset: 4px;
}

.menu-notes-saving,
.menu-notes-error {
  position: absolute;
  bottom: 8px;
  left: 12px;
  right: 12px;
  margin: 0;
  font-family: var(--font-display);
  font-size: clamp(9px, 5.2cqw, 11px);
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.menu-notes-saving {
  color: rgba(34, 28, 18, 0.7);
}

.menu-notes-error {
  color: rgba(179, 0, 0, 0.85);
}

.menu-greeting-video {
  width: clamp(500px, 74vw, 840px);
  max-width: 95vw;
  height: auto;
  border-radius: 16px;
  border: 1px solid rgba(245, 246, 242, 0.16);
  background: rgba(0, 0, 0, 0.35);
  cursor: pointer;
  box-shadow:
    0 14px 40px rgba(0, 0, 0, 0.6),
    inset 0 0 18px rgba(0, 0, 0, 0.35);
}

.menu-video-hint,
.video-sound-hint {
  position: absolute;
  left: 50%;
  bottom: 5px;
  z-index: 3;
  margin: 0;
  padding: 6px 10px;
  max-width: min(60ch, 90%);
  border-radius: 12px;
  background: transparent;
  border: none;
  color: rgba(245, 246, 242, 0.9);
  font-family: var(--font-display);
  font-weight: 800;
  font-size: 11px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  text-shadow: 0 2px 14px rgba(0, 0, 0, 0.9);
  text-align: center;
  transform: translateX(-50%);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1;
  pointer-events: none;
  user-select: none;
}

@media (max-width: 420px) {
  .menu-video-hint,
  .video-sound-hint {
    font-size: 10px;
    bottom: 3px;
  }
}

.admin-video-frame {
  position: relative;
  width: fit-content;
  margin-left: auto;
  margin-right: auto;
}

.menu-greeting-video:focus-visible {
  outline: 3px solid rgba(52, 108, 92, 0.55);
  outline-offset: 4px;
}

.menu-screen::before {
  content: "";
  position: absolute;
  inset: -10%;
  z-index: 0;
  pointer-events: none;

  /* Warm torch-like light */
  background:
    radial-gradient(
      640px 460px at 16% 32%,
      rgba(255, 154, 78, 0.38),
      transparent 62%
    ),
    radial-gradient(
      560px 420px at 84% 34%,
      rgba(255, 132, 58, 0.32),
      transparent 64%
    ),
    radial-gradient(
      900px 700px at 50% 110%,
      rgba(255, 196, 120, 0.14),
      transparent 66%
    );

  opacity: 0.78;
  mix-blend-mode: screen;
  transform: translateZ(0);
  animation: torchFlicker 2.6s infinite;
}

@keyframes torchFlicker {
  0% {
    opacity: 0.66;
    filter: brightness(0.95) saturate(1.15);
    transform: scale(1);
  }
  6% {
    opacity: 0.78;
  }
  13% {
    opacity: 0.7;
  }
  20% {
    opacity: 0.88;
    filter: brightness(1.08) saturate(1.2);
  }
  28% {
    opacity: 0.72;
  }
  37% {
    opacity: 0.92;
  }
  46% {
    opacity: 0.74;
  }
  58% {
    opacity: 0.96;
    filter: brightness(1.12) saturate(1.25);
    transform: scale(1.01);
  }
  70% {
    opacity: 0.72;
    filter: brightness(1) saturate(1.15);
    transform: scale(1);
  }
  82% {
    opacity: 0.9;
  }
  93% {
    opacity: 0.68;
  }
  100% {
    opacity: 0.78;
    filter: brightness(0.98) saturate(1.15);
    transform: scale(1);
  }
}

@media (prefers-reduced-motion: reduce) {
  .menu-screen::before {
    animation: none;
  }
}

.stats-screen {
  background-image: url("./assets/images/posterfinal1.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

.game-screen {
  background-image: url("./assets/images/oficina.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

.menu-layout {
  width: 100%;
  max-width: 360px;

  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 12px;

  position: relative;
  z-index: 1;
  overflow: hidden;

  /* Palette sampled from Portada final.png (slate/steel) */
  --menu-surface: rgba(28, 36, 52, 0.72); /* #1c2434 */
  --menu-surface-2: rgba(36, 44, 60, 0.62); /* #242c3c */
  --menu-border: rgba(52, 68, 76, 0.34); /* #34444c */

  background: linear-gradient(180deg, var(--menu-surface), var(--menu-surface-2));
  border: 1px solid var(--menu-border);
  border-radius: 18px;
  padding: 14px;
  box-shadow: 0 18px 48px rgba(0, 0, 0, 0.55);
}

.menu-layout::before {
  content: "";
  position: absolute;
  inset: -40%;
  pointer-events: none;

  /* Same dungeon brick texture, tuned a bit cooler for the cover image */
  background-image:
    repeating-linear-gradient(
      0deg,
      rgba(245, 246, 242, 0.06) 0 2px,
      transparent 2px 26px
    ),
    repeating-linear-gradient(
      90deg,
      rgba(245, 246, 242, 0.05) 0 2px,
      transparent 2px 60px
    ),
    repeating-linear-gradient(
      90deg,
      rgba(245, 246, 242, 0.04) 0 2px,
      transparent 2px 60px
    ),
    radial-gradient(
      circle at 30% 25%,
      rgba(52, 68, 76, 0.28),
      transparent 55%
    ),
    radial-gradient(
      circle at 70% 75%,
      rgba(44, 52, 60, 0.22),
      transparent 60%
    );

  background-size:
    100% 28px,
    64px 100%,
    64px 100%,
    100% 100%,
    100% 100%;
  background-position:
    0 0,
    0 0,
    32px 14px,
    0 0,
    0 0;

  opacity: 0.28;
  transform: rotate(-6deg);
  animation: dungeonTextureDrift 14s linear infinite;
}

.menu-layout::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(
      120% 70% at 50% 0%,
      rgba(52, 108, 92, 0.16),
      transparent 60%
    ),
    radial-gradient(
      140% 90% at 50% 100%,
      rgba(0, 0, 0, 0.55),
      transparent 65%
    );
  opacity: 1;
}

.menu-layout > * {
  position: relative;
  z-index: 1;
}

.menu-layout.menu-layout--floating {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  overflow: visible;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;

  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
  align-items: stretch;
  justify-items: stretch;
  max-width: 640px;
}

.menu-layout.menu-layout--floating::before,
.menu-layout.menu-layout--floating::after {
  content: none;
}

.menu-layout.menu-layout--floating .dungeon-btn {
  width: 100%;
  max-width: none;
  margin: 0;
}

.menu-layout.menu-layout--floating .menu-admin-btn {
  grid-column: 1 / -1;
  color: rgba(27, 18, 0, 0.92);
  background: linear-gradient(
    135deg,
    rgba(255, 216, 120, 0.92) 0%,
    rgba(214, 154, 36, 0.92) 100%
  );
  border-color: rgba(255, 224, 150, 0.62);
  text-shadow: none;
}

.menu-layout.menu-layout--floating .menu-admin-btn:hover {
  color: rgba(27, 18, 0, 0.92);
  border-color: rgba(255, 236, 184, 0.88);
  text-shadow: 0 0 10px rgba(255, 216, 120, 0.35);
  box-shadow:
    0 0 0 2px rgba(255, 216, 120, 0.22),
    0 0 22px rgba(255, 216, 120, 0.22),
    inset 0 0 16px rgba(255, 216, 120, 0.18);
}

@media (max-width: 460px) {
  .menu-layout.menu-layout--floating {
    grid-template-columns: 1fr;
  }
}

/* Difficulty modal (Menu) */
.menu-modal-backdrop {
  position: fixed;
  inset: 0;
  z-index: 50;
  display: grid;
  place-items: center;
  padding: 24px;
  /* Page background while choosing difficulty */
  background: #000;
}

.menu-modal-shell {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 18px;
}

.menu-side-flame {
  width: clamp(110px, 16vw, 260px);
  height: auto;
  filter: drop-shadow(0 12px 18px rgba(0, 0, 0, 0.6));
  opacity: 0.95;
  user-select: none;
  pointer-events: none;
}

.menu-side-flame--left {
  transform: scaleX(-1);
}

@media (max-width: 760px) {
  .menu-side-flame {
    display: none;
  }
}

@media (prefers-reduced-motion: reduce) {
  .menu-side-flame {
    display: none;
  }
}

.menu-modal {
  width: 100%;
  max-width: 320px;
  display: flex;
  flex-direction: column;
  gap: 12px;

  position: relative;
  overflow: hidden;

  /* "Pasillo" photo background for the difficulty box */
  background-image: url("./assets/images/pasillo.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  border: 1px solid rgba(245, 246, 242, 0.16);
  border-radius: 18px;
  padding: 14px;
  box-shadow: 0 22px 70px rgba(0, 0, 0, 0.7);
}

.menu-modal::before {
  content: "";
  position: absolute;
  inset: -40%;
  pointer-events: none;

  /* Scrim for readability on top of the photo */
  background:
    radial-gradient(120% 85% at 50% 0%, rgba(0, 0, 0, 0.62), transparent 60%),
    radial-gradient(140% 95% at 50% 100%, rgba(0, 0, 0, 0.75), transparent 70%),
    linear-gradient(180deg, rgba(0, 0, 0, 0.42), rgba(0, 0, 0, 0.62));

  opacity: 1;
  transform: none;
  animation: none;
}

.menu-modal > * {
  position: relative;
  z-index: 1;
}

.menu-modal-title {
  margin: 0;
  font-family: var(--font-display);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-size: 18px;
  padding: 10px 14px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.55);
  border: 1px solid rgba(245, 246, 242, 0.14);
  width: fit-content;
  margin-left: auto;
  margin-right: auto;
}

.menu-modal-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}

.menu-modal .dungeon-btn {
  width: 84%;
  max-width: 280px;
  padding: 12px 18px;
  font-size: 0.78rem;
  letter-spacing: 0.1em;
  border-width: 2px;
}

/* Stats / Ranking screen (reuses menu layout look) */
.stats-layout {
  max-width: 560px;
  gap: 14px;
  padding: 16px 16px 18px;
}

.stats-title {
  margin: 0;
  font-size: clamp(22px, 2.6vw, 30px);
  letter-spacing: 0.06em;
  text-transform: uppercase;
}

.stats-subtitle {
  margin: 0 0 10px;
  font-size: 18px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.stats-card {
  width: 100%;
  border-radius: 14px;
  padding: 14px;
  background: rgba(0, 0, 0, 0.06);
  border: 1px solid rgba(245, 246, 242, 0.14);
  box-shadow: inset 0 0 18px rgba(0, 0, 0, 0.4);
}

.stats-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  padding: 8px 0;
  border-bottom: 1px dashed rgba(245, 246, 242, 0.14);
  font-family: var(--font-display);
  text-align: center;
  align-items: center;
}

.stats-row:last-child {
  border-bottom: none;
}

.stats-row span {
  opacity: 0.9;
  justify-self: center;
}

.stats-row strong {
  font-family: var(--font-display);
  letter-spacing: 0.04em;
  justify-self: center;
}

.ranking-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.ranking-item {
  display: grid;
  grid-template-columns: 54px 1fr 86px;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  background: rgba(0, 0, 0, 0.18);
  border: 1px solid rgba(245, 246, 242, 0.12);
  font-size: 14px;
  color: rgba(245, 246, 242, 0.92);
  font-family: var(--font-body);
}

.ranking-pos {
  font-family: var(--font-display);
  letter-spacing: 0.06em;
  opacity: 0.9;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.ranking-name {
  text-align: left;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.ranking-score {
  text-align: right;
  font-family: var(--font-display);
  letter-spacing: 0.04em;
}

.ranking-medal {
  width: 16px;
  height: 16px;
  border-radius: 999px;
  flex: 0 0 16px;
  box-shadow:
    inset 0 0 0 1px rgba(0, 0, 0, 0.45),
    0 3px 10px rgba(0, 0, 0, 0.35);
}

.ranking-medal--gold {
  background: radial-gradient(circle at 35% 35%, #fff1a6, #d4af37 60%, #6b4f12);
}

.ranking-medal--silver {
  background: radial-gradient(circle at 35% 35%, #ffffff, #bfc7d0 60%, #5a616a);
}

.ranking-medal--bronze {
  background: radial-gradient(circle at 35% 35%, #ffd1a6, #b87333 60%, #5d3413);
}

.ranking-pos--gold {
  text-shadow: 0 0 12px rgba(212, 175, 55, 0.28);
}

.ranking-pos--silver {
  text-shadow: 0 0 12px rgba(191, 199, 208, 0.24);
}

.ranking-pos--bronze {
  text-shadow: 0 0 12px rgba(184, 115, 51, 0.24);
}

.stats-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}

.result-video-wrap {
  display: grid;
  place-items: center;
  gap: 8px;
}

.result-video {
  width: 100%;
  max-width: 520px;
  height: auto;
  box-sizing: border-box;
  border-radius: 16px;
  border: 1px solid rgba(245, 246, 242, 0.16);
  background: rgba(0, 0, 0, 0.35);
  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.55);
  cursor: pointer;
}

.result-video:focus-visible {
  outline: 3px solid rgba(52, 108, 92, 0.55);
  outline-offset: 4px;
}

.result-video-hint {
  margin: 0;
  font-size: 12px;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  opacity: 0.85;
}

.stats-layout .dungeon-btn {
  width: 84%;
  max-width: 280px;
  padding: 12px 18px;
  font-size: 0.78rem;
  letter-spacing: 0.1em;
  border-width: 2px;
}

.admin-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: stretch;
}

.admin-inline {
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
}

.admin-inline .text-input {
  text-align: left;
}

.admin-inline .dungeon-btn {
  width: 100%;
  max-width: none;
}

.admin-player-id {
  display: block;
  margin-top: 2px;
  font-size: 12px;
  opacity: 0.85;
  font-family: var(--font-body);
  letter-spacing: 0.02em;
  text-transform: none;
}

.admin-row-btn {
  width: 100%;
  cursor: pointer;
  color: inherit;
  font: inherit;
}

.admin-row-btn:focus-visible {
  outline: 3px solid rgba(255, 216, 120, 0.35);
  outline-offset: 4px;
}

.admin-wolf-img {
  width: 100%;
  max-width: 520px;
  height: auto;
  display: block;
  margin: 0 auto;
  box-sizing: border-box;
  border-radius: 16px;
  border: 1px solid rgba(255, 216, 120, 0.35);
  box-shadow: 0 18px 52px rgba(0, 0, 0, 0.55);
  cursor: pointer;
}

.stats-layout.admin-layout {
  max-width: 480px;
  gap: 12px;
  padding: 14px 14px 16px;
}

.admin-layout .stats-card {
  padding: 12px;
  border-radius: 12px;
}

.admin-layout .stats-subtitle {
  margin: 0 0 8px;
  font-size: 16px;
}

.admin-layout .text-input {
  padding: 10px 12px;
  font-size: 15px;
}

.admin-layout .admin-actions {
  gap: 10px;
}

.admin-layout .admin-inline {
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 8px;
}

.admin-layout .admin-inline .text-input {
  min-width: 0;
}

.admin-layout .admin-inline .dungeon-btn {
  width: auto;
  justify-self: end;
  padding: 10px 14px;
  white-space: nowrap;
}

.admin-layout .admin-wolf-img {
  max-width: 420px;
  border-radius: 14px;
}

.admin-question-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.admin-question-toolbar {
  margin: 0 0 10px;
}

.admin-question-search {
  text-align: left;
}

.admin-question-item {
  display: grid;
  grid-template-columns: 64px 1fr;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  background: rgba(0, 0, 0, 0.18);
  border: 1px solid rgba(245, 246, 242, 0.12);
  font-size: 14px;
  color: rgba(245, 246, 242, 0.92);
  font-family: var(--font-body);
}

.admin-question-pos {
  font-family: var(--font-display);
  letter-spacing: 0.06em;
  opacity: 0.9;
  white-space: nowrap;
}

.admin-question-text {
  text-align: left;
  line-height: 1.35;
}

.admin-confirm-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.62);
  display: grid;
  place-items: center;
  padding: 16px;
  z-index: 50;
}

.admin-confirm-modal {
  width: min(92vw, 460px);
  border-radius: 16px;
  padding: 14px;
  background: rgba(0, 0, 0, 0.72);
  border: 1px solid rgba(245, 246, 242, 0.14);
  box-shadow: 0 18px 52px rgba(0, 0, 0, 0.65);
  backdrop-filter: blur(10px) saturate(115%);
  -webkit-backdrop-filter: blur(10px) saturate(115%);
}

.admin-detail-modal {
  width: min(92vw, 520px);
  border-radius: 16px;
  padding: 14px;
  background: rgba(0, 0, 0, 0.74);
  border: 1px solid rgba(245, 246, 242, 0.14);
  box-shadow: 0 18px 52px rgba(0, 0, 0, 0.65);
  backdrop-filter: blur(10px) saturate(115%);
  -webkit-backdrop-filter: blur(10px) saturate(115%);
  font-family: var(--font-body);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.admin-detail-grid {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(0, 0, 0, 0.22);
  border: 1px solid rgba(245, 246, 242, 0.12);
}

.admin-detail-row {
  display: grid;
  grid-template-columns: 120px 1fr;
  gap: 10px;
  align-items: start;
}

.admin-detail-label {
  font-family: var(--font-display);
  letter-spacing: 0.06em;
  text-transform: uppercase;
  font-size: 12px;
  opacity: 0.85;
}

.admin-detail-value {
  text-align: left;
  word-break: break-word;
}

.admin-edit-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.admin-edit-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.admin-edit-field--full {
  grid-column: 1 / -1;
}

.admin-detail-danger .dungeon-btn {
  width: 100%;
  max-width: none;
}

.admin-confirm-title {
  margin: 0;
  font-family: var(--font-display);
  letter-spacing: 0.06em;
  text-transform: uppercase;
  font-size: 16px;
}

.admin-confirm-body {
  margin: 10px 0 0;
  opacity: 0.95;
  line-height: 1.35;
}

.admin-confirm-id {
  margin: 10px 0 0;
  font-size: 12px;
  opacity: 0.85;
  word-break: break-word;
}

.admin-confirm-actions {
  margin-top: 12px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.admin-confirm-actions .secondary-button,
.admin-confirm-actions .dungeon-btn {
  width: 100%;
  max-width: none;
  padding: 12px 14px;
  font-size: 0.78rem;
}

.admin-confirm-danger {
  border-color: rgba(255, 107, 107, 0.7);
}

.admin-confirm-danger:hover {
  border-color: rgba(255, 107, 107, 0.9);
  text-shadow: 0 0 10px rgba(255, 107, 107, 0.35);
  box-shadow:
    0 0 0 2px rgba(255, 107, 107, 0.14),
    0 0 22px rgba(255, 107, 107, 0.12),
    inset 0 0 16px rgba(255, 107, 107, 0.1);
}

@media (max-width: 420px) {
  .admin-layout .admin-inline {
    grid-template-columns: 1fr;
  }

  .admin-layout .admin-inline .dungeon-btn {
    width: 100%;
  }

  .admin-edit-grid {
    grid-template-columns: 1fr;
  }

  .admin-detail-row {
    grid-template-columns: 1fr;
  }
}

.menu-layout.admin-layout {
  /* Golden admin theme */
  background: linear-gradient(180deg, rgba(120, 86, 22, 0.7), rgba(72, 52, 16, 0.64));
  border-color: rgba(255, 216, 120, 0.28);
  box-shadow: 0 18px 48px rgba(0, 0, 0, 0.55);
}

.menu-layout.admin-layout::after {
  background:
    radial-gradient(120% 70% at 50% 0%, rgba(255, 216, 120, 0.22), transparent 60%),
    radial-gradient(140% 90% at 50% 100%, rgba(0, 0, 0, 0.55), transparent 65%);
}

.menu-layout.admin-layout .dungeon-btn {
  color: rgba(27, 18, 0, 0.92);
  background: linear-gradient(135deg, rgba(255, 216, 120, 0.92) 0%, rgba(214, 154, 36, 0.92) 100%);
  border-color: rgba(255, 224, 150, 0.55);
  box-shadow:
    0 0 0 2px rgba(0, 0, 0, 0.55),
    inset 0 0 12px rgba(0, 0, 0, 0.28),
    6px 10px 22px rgba(0, 0, 0, 0.48);
  text-shadow: none;
}

.menu-layout.admin-layout .dungeon-btn:hover {
  border-color: rgba(255, 236, 184, 0.85);
  box-shadow:
    0 0 0 2px rgba(255, 216, 120, 0.22),
    0 0 22px rgba(255, 216, 120, 0.22),
    inset 0 0 16px rgba(255, 216, 120, 0.18);
  transform: translateY(-2px);
}

.menu-layout.admin-layout .dungeon-btn:active {
  transform: translateY(1px);
}

.auth-layout {
  width: 100%;
  max-width: 460px;

  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 14px;

  position: relative;
  overflow: hidden;

  background: transparent;
  border: 1px solid rgba(0, 0, 0, 0);
  border-radius: 18px;
  padding: 20px;
  box-shadow: none;
}

.character-layout {
  width: 100%;
  max-width: 900px;

  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 14px;

  position: relative;
  overflow: hidden;

  background: transparent;
  border: 1px solid rgba(0, 0, 0, 0);
  border-radius: 18px;
  padding: 20px;
  box-shadow: none;
}

.character-carousel {
  display: grid;
  grid-template-columns: 44px 1fr 44px;
  align-items: center;
  gap: 10px;
}

.carousel-arrow {
  height: 44px;
  width: 44px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(36, 52, 52, 0.45);
  color: rgba(245, 246, 242, 0.92);
  cursor: pointer;
  font-family: var(--font-display);
  font-weight: 900;
  font-size: 18px;
}

.carousel-arrow:hover {
  border-color: rgba(52, 108, 92, 0.65);
}

@media (max-width: 460px) {
  .character-carousel {
    grid-template-columns: 1fr;
  }

  .carousel-arrow {
    display: none;
  }
}

.coverflow-stage {
  border-radius: 16px;
  border: 1px solid rgba(100, 116, 100, 0.35);
  background: transparent;
  overflow: hidden;
  height: clamp(360px, 55vh, 460px);
  display: grid;
  place-items: center;
  touch-action: pan-y;
  position: relative;
}

.coverflow-stage:focus-visible {
  outline: 3px solid rgba(52, 108, 92, 0.55);
  outline-offset: 4px;
}

.coverflow {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  perspective: 900px;
  transform-style: preserve-3d;
}

.coverflow-card {
  position: absolute;
  height: min(92%, 420px);
  width: auto;
  max-width: 330px;
  aspect-ratio: 3 / 4;
  border-radius: 16px;
  overflow: hidden;
  backface-visibility: hidden;
  will-change: transform, opacity;

  border: 1px solid rgba(245, 246, 242, 0.18);
  background: rgba(0, 0, 0, 0.12);
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.45);

  cursor: pointer;
  padding: 0;
  outline: none;

  transform:
    translate3d(calc(var(--offset) * 100px), 0, calc(var(--abs) * -120px))
    rotateY(calc(var(--offset) * -18deg))
    scale(calc(1 - (var(--abs) * 0.12)));
  opacity: calc(1 - (var(--abs) * 0.22));

  transition:
    transform 380ms ease,
    opacity 380ms ease,
    box-shadow 380ms ease,
    border-color 380ms ease;
}

.coverflow-card::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(
    180deg,
    rgba(0, 0, 0, 0.18),
    transparent 30%,
    rgba(0, 0, 0, 0.28)
  );
  opacity: calc(0.25 + (var(--abs) * 0.08));
}

.coverflow-card:hover {
  border-color: rgba(52, 108, 92, 0.55);
}

.coverflow-card-active {
  border-color: rgba(52, 108, 92, 0.8);
  box-shadow:
    0 14px 32px rgba(0, 0, 0, 0.55),
    0 0 22px rgba(52, 108, 92, 0.22);
  opacity: 1;
}

.coverflow-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center 20%;
  display: block;
}

.character-frame {
  border-radius: 16px;
  border: 1px solid rgba(100, 116, 100, 0.35);
  background: rgba(0, 0, 0, 0.25);
  overflow: hidden;
  /* "foto de carnet" vibe (portrait) */
  aspect-ratio: 3 / 4;
  max-height: 420px;
  display: grid;
  place-items: center;
  touch-action: pan-y;
}

.character-frame:focus-visible {
  outline: 3px solid rgba(52, 108, 92, 0.55);
  outline-offset: 4px;
}

.character-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center 20%;
  display: block;
  animation: carnetIn 240ms ease both;
}

@keyframes carnetIn {
  from {
    opacity: 0.7;
    transform: translateX(10px) scale(0.99);
    filter: saturate(0.95) contrast(0.98);
  }
  to {
    opacity: 1;
    transform: translateX(0) scale(1);
    filter: saturate(1) contrast(1);
  }
}

.character-name {
  margin: 0;
  font-family: var(--font-display);
  color: rgba(245, 246, 242, 0.92);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: 16px;
}

.carousel-dots {
  display: flex;
  justify-content: center;
  gap: 8px;
}

.dot {
  width: 7px;
  height: 7px;
  border-radius: 99px;
  background: rgba(245, 246, 242, 0.25);
}

.dot-active {
  background: rgba(52, 108, 92, 0.95);
  box-shadow: 0 0 0 3px rgba(52, 108, 92, 0.18);
}

.signup-layout {
  width: min(92vw, 700px);
  position: relative;
  aspect-ratio: 864 / 1184;

  border-radius: 18px;
  overflow: hidden;
}

.signup-cv {
  position: absolute;
  inset: 0;
  z-index: 0;
  width: 100%;
  height: 100%;
  display: block;
  object-fit: cover;
}

.signup-cv--hamster {
  /*
    HamsterCV artwork looks more "zoomed" than the rest.
    Scale it down visually without changing the layout size.
  */
  transform: scale(0.72);
  transform-origin: center;
}

.signup-overlay {
  position: absolute;
  inset: 0;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 14px;
}

.signup-form {
  /* Keep the form panel a fixed-ish size even if the CV image grows */
  width: min(280px, 86vw);
  padding: 12px;
  border-radius: 14px;
  border: 1px solid rgba(245, 246, 242, 0.14);
  background: rgba(0, 0, 0, 0.3);
  text-align: center;
}

.signup-subtitle {
  margin: -2px auto 8px;
  width: fit-content;
  padding: 0;
  border-radius: 0;
  background: transparent;
  border: none;
  font-size: 13px;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  opacity: 0.9;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.75);
}

.signup-form .auth-title {
  text-align: center;
}

.signup-fields {
  display: flex;
  flex-direction: column;
  gap: 10px;

  padding: 12px;
  border-radius: 12px;
  border: 1px solid rgba(245, 246, 242, 0.12);
  background: rgba(0, 0, 0, 0.48);
}

.signup-form .text-input {
  padding: 10px 12px;
  font-size: 14px;
  text-align: center;
}

.signup-fields .text-input {
  border-color: rgba(245, 246, 242, 0.14);
  background: rgba(0, 0, 0, 0.52);
}

.signup-fields .text-input:focus {
  border-color: rgba(52, 108, 92, 0.75);
  box-shadow: 0 0 0 3px rgba(52, 108, 92, 0.18);
}

.signup-btn {
  width: 100%;
  padding: 12px 14px;
  font-size: 0.95rem;
  font-family: var(--font-display);
  font-weight: 800;
  color: rgba(245, 246, 242, 0.92);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  cursor: pointer;

  background: rgba(36, 52, 52, 0.18);
  border: 2px solid rgba(245, 246, 242, 0.18);
  border-radius: 12px;
  box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.45);
  transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease,
    background 0.2s ease;
}

.signup-btn:hover {
  border-color: rgba(52, 108, 92, 0.75);
  box-shadow: inset 0 0 18px rgba(52, 108, 92, 0.22);
  transform: translateY(-1px);
}

.signup-btn:active {
  transform: translateY(1px);
}

.signup-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: none;
}

.auth-layout::before {
  content: "";
  position: absolute;
  inset: -40%;
  pointer-events: none;

  /* Animated "dungeon brick" texture overlay */
  background-image:
    /* horizontal mortar */
    repeating-linear-gradient(
      0deg,
      rgba(245, 246, 242, 0.07) 0 2px,
      transparent 2px 26px
    ),
    /* vertical mortar (row A) */
    repeating-linear-gradient(
      90deg,
      rgba(245, 246, 242, 0.06) 0 2px,
      transparent 2px 60px
    ),
    /* vertical mortar (row B, offset) */
    repeating-linear-gradient(
      90deg,
      rgba(245, 246, 242, 0.05) 0 2px,
      transparent 2px 60px
    ),
    /* subtle grime / stone variation */
    radial-gradient(
      circle at 30% 25%,
      rgba(52, 108, 92, 0.22),
      transparent 55%
    ),
    radial-gradient(
      circle at 70% 75%,
      rgba(100, 116, 100, 0.18),
      transparent 60%
    );

  background-size:
    100% 28px,
    64px 100%,
    64px 100%,
    100% 100%,
    100% 100%;
  background-position:
    0 0,
    0 0,
    32px 14px,
    0 0,
    0 0;

  opacity: 0;
  transform: rotate(-6deg);
  animation: dungeonTextureDrift 14s linear infinite;
}

.auth-layout::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;

  /* a soft moving highlight + vignette to feel "alive" */
  background:
    radial-gradient(
      120% 70% at 50% 0%,
      rgba(52, 108, 92, 0.22),
      transparent 60%
    ),
    radial-gradient(
      140% 90% at 50% 100%,
      rgba(0, 0, 0, 0.55),
      transparent 65%
    );
  opacity: 0;
  animation: dungeonGlow 8s ease-in-out infinite;
}

.auth-layout > * {
  position: relative;
  z-index: 1;
}

@keyframes dungeonTextureDrift {
  0% {
    background-position: 0 0, 0 0, 32px 14px, 0 0, 0 0;
  }
  100% {
    background-position: 0 84px, 96px 0, 128px 42px, 0 0, 0 0;
  }
}

@keyframes dungeonGlow {
  0%,
  100% {
    filter: saturate(1) brightness(1);
  }
  50% {
    filter: saturate(1.08) brightness(1.06);
  }
}

@media (prefers-reduced-motion: reduce) {
  .auth-layout::before,
  .auth-layout::after,
  .menu-layout::before,
  .menu-layout::after {
    animation: none;
  }

  .coverflow-card {
    transition: none;
  }
}

.logo-video {
  width: 100%;
  max-width: 432px;
  margin: 0 auto 12px;
  display: block;

  border-radius: 14px;
  border: none;
  background: transparent;
  box-shadow: 0 16px 44px rgba(0, 0, 0, 0.55);
  mix-blend-mode: screen;

  height: auto;
  object-fit: contain;
}

.helper-text {
  margin: 0;
  color: var(--login-ink);
  font-family: var(--font-display);
  font-size: 22px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  opacity: 0.95;
  width: fit-content;
  margin-left: auto;
  margin-right: auto;
  padding: 10px 14px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.55);
  border: 1px solid rgba(245, 246, 242, 0.14);
}

.auth-form {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 12px;
}

.auth-title {
  margin: 0;
  font-size: 20px;
}

.text-input {
  width: 100%;
  padding: 14px 14px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(255, 255, 255, 0.06);
  color: inherit;
  font-family: var(--font-body);
  font-size: 16px;
  outline: none;
}

.text-input::placeholder {
  color: rgba(255, 255, 255, 0.65);
}

.login-screen .text-input {
  border-color: rgba(100, 116, 100, 0.4);
  background: rgba(36, 52, 52, 0.35);
  text-align: center;
}

.login-screen .auth-title {
  font-family: var(--font-display);
  letter-spacing: 0.05em;
}

.text-input:focus {
  border-color: rgba(52, 108, 92, 0.65);
  box-shadow: 0 0 0 3px rgba(52, 108, 92, 0.22);
}

.error-text {
  margin: 0;
  color: #ff6b6b;
  font-size: 14px;
}

/* texto de pregunta */
.question-text {
  max-width: 700px;
  font-size: 22px;
  margin-bottom: 24px;
}

/* layout especifico de Game: alinea texto y botones en la misma columna */
.game-layout {
  width: 100%;
  max-width: 420px;

  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 16px;

  /* Cajetin (transparente) para que el fondo se vea */
  padding: 16px 14px;
  border-radius: 18px;
  background: rgba(0, 0, 0, 0.34);
  border: 1px solid rgba(245, 246, 242, 0.14);
  box-shadow: 0 18px 48px rgba(0, 0, 0, 0.5);

  /* Translucido con un poco de blur (si el navegador lo soporta) */
  backdrop-filter: blur(10px) saturate(115%);
  -webkit-backdrop-filter: blur(10px) saturate(115%);
}

.lobo-dance-overlay {
  position: fixed;
  z-index: 999;
  top: 50%;
  left: 50%;
  height: min(52vh, 520px);
  width: auto;
  max-width: min(48vw, 400px);
  transform: translate3d(-50%, -50%, 0);
  pointer-events: auto;
  cursor: pointer;
  object-fit: contain;
  filter: drop-shadow(0 16px 22px rgba(0, 0, 0, 0.65));
  opacity: 1;
  will-change: transform, opacity;
}

.lobo-dance-overlay--enter {
  animation: loboDanceEnter 1400ms ease-in-out both;
}

.lobo-dance-overlay--center {
  animation: none;
}

.lobo-dance-overlay--exit {
  animation: loboDanceExit 1400ms ease-in-out both;
}

@keyframes loboDanceEnter {
  from {
    transform: translate3d(-50%, -50%, 0) translateX(calc(50vw + 100%));
    opacity: 1;
  }
  to {
    transform: translate3d(-50%, -50%, 0) translateX(0);
    opacity: 1;
  }
}

@keyframes loboDanceExit {
  from {
    transform: translate3d(-50%, -50%, 0) translateX(0);
    opacity: 1;
  }
  to {
    transform: translate3d(-50%, -50%, 0) translateX(calc(-50vw - 100%));
    opacity: 1;
  }
}

@media (prefers-reduced-motion: reduce) {
  .lobo-dance-overlay {
    display: none;
    animation: none;
  }
}

.game-difficulty-pill {
  margin: 0 auto;
  width: fit-content;
  padding: 8px 12px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.55);
  border: 1px solid rgba(245, 246, 242, 0.14);
  font-family: var(--font-display);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  font-size: 12px;
  opacity: 0.9;
}

.game-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  flex-wrap: wrap;
}

.game-header .game-difficulty-pill {
  margin: 0;
}

.game-progress-pill {
  margin: 0;
  width: fit-content;
  padding: 8px 12px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.55);
  border: 1px solid rgba(245, 246, 242, 0.14);
  font-family: var(--font-display);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: 12px;
  opacity: 0.9;
}

.game-intro {
  margin: 0;
  font-family: var(--font-display);
  letter-spacing: 0.04em;
  opacity: 0.9;
  font-size: 13px;
  text-transform: uppercase;
}

.question-card {
  max-width: 100%;
  margin-bottom: 0;
  padding: 12px 14px;
  border-radius: 14px;
  background: rgba(0, 0, 0, 0.62);
  border: 1px solid rgba(245, 246, 242, 0.14);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.question-card--correct {
  background: linear-gradient(135deg, rgba(0, 200, 120, 0.42) 0%, rgba(0, 0, 0, 0.62) 62%);
  border-color: rgba(0, 255, 170, 0.72);
  box-shadow:
    0 0 0 2px rgba(0, 255, 170, 0.18),
    0 0 26px rgba(0, 255, 170, 0.14);
}

.question-card--wrong {
  background: linear-gradient(135deg, rgba(255, 0, 45, 0.44) 0%, rgba(0, 0, 0, 0.62) 62%);
  border-color: rgba(255, 40, 90, 0.85);
  box-shadow:
    0 0 0 2px rgba(255, 40, 90, 0.18),
    0 0 30px rgba(255, 40, 90, 0.16);
}

.wolf-message {
  margin: 0;
  font-family: var(--font-display);
  letter-spacing: 0.04em;
  text-transform: uppercase;
  font-size: 14px;
  opacity: 0.95;
}

.wolf-message--correct {
  color: rgba(0, 255, 170, 0.95);
  text-shadow: 0 0 16px rgba(0, 255, 170, 0.22);
}

.wolf-message--wrong {
  color: rgba(255, 80, 120, 0.98);
  text-shadow: 0 0 18px rgba(255, 40, 90, 0.26);
}

.answer-btn--selected {
  border-color: rgba(52, 108, 92, 0.9);
  box-shadow:
    0 0 0 2px rgba(52, 108, 92, 0.22),
    0 0 22px rgba(52, 108, 92, 0.22),
    inset 0 0 16px rgba(52, 108, 92, 0.16);
}

.dungeon-btn.answer-btn--correct {
  background: linear-gradient(135deg, rgba(0, 210, 125, 0.98) 0%, rgba(0, 55, 30, 0.98) 100%);
  border-color: rgba(0, 255, 170, 0.9);
  box-shadow:
    0 0 0 2px rgba(0, 255, 170, 0.22),
    0 0 34px rgba(0, 255, 170, 0.28),
    inset 0 0 18px rgba(0, 0, 0, 0.22);
  color: rgba(245, 246, 242, 0.98);
  text-shadow: none;
}

.dungeon-btn.answer-btn--wrong {
  background: linear-gradient(135deg, rgba(255, 0, 45, 0.99) 0%, rgba(120, 0, 18, 0.99) 100%);
  border-color: rgba(255, 40, 90, 0.95);
  box-shadow:
    0 0 0 2px rgba(255, 40, 90, 0.18),
    0 0 44px rgba(255, 40, 90, 0.34),
    inset 0 0 18px rgba(0, 0, 0, 0.26);
  color: rgba(245, 246, 242, 0.98);
  text-shadow: none;
}

.game-layout .primary-button {
  width: 100%;
  max-width: none;
}

.game-layout .secondary-button {
  width: 100%;
  max-width: none;
}

.game-layout .question-text {
  max-width: 100%;
  margin: 0;
  padding: 0;
  border: none;
  background: transparent;
}

/* contenedor de respuestas */
.answers-container {
  display: flex;
  flex-direction: column;
  gap: 16px;

  width: 100%;
  max-width: 500px;
}

.game-layout .answers-container {
  max-width: none;
}

.game-layout .dungeon-btn {
  width: 100%;
  max-width: none;
  margin-left: auto;
  margin-right: auto;
  padding: 12px 18px;
  font-size: 0.78rem;
  letter-spacing: 0.1em;
  border-width: 2px;
}

/* botones */
.primary-button {
  width: 90vw;
  max-width: 360px;
  padding: 16px 18px;
  font-size: 18px;
  font-family: var(--font-display);

  background-color: #b30000;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;

  /* For long answer text */
  white-space: normal;
  text-align: center;
}

.primary-button:hover {
  background-color: #ff0000;
}

.primary-button:disabled,
.secondary-button:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.secondary-button {
  width: 90vw;
  max-width: 360px;
  padding: 16px 18px;
  font-size: 18px;
  font-family: var(--font-display);

  background-color: transparent;
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.35);
  border-radius: 8px;
  cursor: pointer;
}

.secondary-button:hover {
  border-color: rgba(255, 0, 0, 0.65);
}

.auth-layout .primary-button,
.auth-layout .secondary-button {
  width: 100%;
  max-width: none;
}

/* Login color overrides to match pasillo palette */
.login-screen .primary-button {
  background-color: var(--login-accent);
  color: var(--login-ink);
  border: 1px solid rgba(100, 116, 100, 0.22);
}

.login-screen .primary-button:hover {
  background-color: var(--login-accent-hover);
}

.login-screen .secondary-button {
  background-color: rgba(52, 108, 92, 0.12);
  color: var(--login-ink);
  border-color: rgba(100, 116, 100, 0.55);
}

.login-screen .secondary-button:hover {
  border-color: rgba(52, 108, 92, 0.85);
}

/* Dungeon-styled button (used in Login) */
.dungeon-btn {
  width: 90vw;
  max-width: 360px;
  padding: 17px 26px;
  font-size: 1.12rem;
  font-family: var(--font-display);
  font-weight: 800;
  color: #fff;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  cursor: pointer;
  border: none;
  position: relative;
  transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease,
    color 0.25s ease, background 0.25s ease;

  /* stone / metal vibe, but driven by pasillo palette when available */
  background: linear-gradient(135deg, rgba(36, 52, 52, 0.95) 0%, rgba(0, 0, 0, 0.92) 100%);
  border: 3px solid rgba(100, 116, 100, 0.42);
  border-radius: 10px;
  box-shadow:
    0 0 0 2px rgba(26, 26, 26, 0.7),
    inset 0 0 10px rgba(0, 0, 0, 0.75),
    6px 10px 22px rgba(0, 0, 0, 0.55);
}

.dungeon-btn:hover {
  color: #fff;
  border-color: rgba(52, 108, 92, 0.85);
  text-shadow: 0 0 10px rgba(52, 108, 92, 0.55);
  box-shadow:
    0 0 0 2px rgba(52, 108, 92, 0.25),
    0 0 22px rgba(52, 108, 92, 0.28),
    inset 0 0 16px rgba(52, 108, 92, 0.22);
  transform: translateY(-2px);
}

.dungeon-btn:active {
  transform: translateY(1px);
  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.85);
}

.dungeon-btn:focus-visible {
  outline: 3px solid rgba(52, 108, 92, 0.55);
  outline-offset: 3px;
}

.dungeon-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: none;
}

.auth-layout .dungeon-btn {
  width: 100%;
  max-width: none;
}

.character-layout .dungeon-btn,
.character-layout .secondary-button {
  width: 100%;
  max-width: none;
}

.character-select-btn {
  width: 100%;
  max-width: 360px;
  margin-left: auto;
  margin-right: auto;

  padding: 15px 22px;
  font-size: 1.05rem;
  font-family: var(--font-display);
  font-weight: 800;
  color: #fff;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  cursor: pointer;

  background: rgba(0, 0, 0, 0.55);
  border: 2px solid rgba(245, 246, 242, 0.18);
  border-radius: 12px;
  box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.55);
  transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
}

.character-select-btn:hover {
  border-color: rgba(52, 108, 92, 0.75);
  box-shadow: inset 0 0 18px rgba(52, 108, 92, 0.22);
  transform: translateY(-1px);
}

.character-select-btn:active {
  transform: translateY(1px);
}

.character-title {
  width: fit-content;
  margin: 0 auto;
  padding: 10px 14px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.55);
  border: 1px solid rgba(245, 246, 242, 0.14);
}

.character-name-pill {
  width: fit-content;
  margin-left: auto;
  margin-right: auto;
  padding: 8px 12px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.55);
  border: 1px solid rgba(245, 246, 242, 0.14);
}

.signup-layout .dungeon-btn,
.signup-layout .secondary-button {
  width: 100%;
  max-width: none;
}

.signup-layout .signup-btn {
  width: 100%;
  max-width: none;
}

.menu-layout .dungeon-btn {
  width: 84%;
  max-width: 280px;
  margin-left: auto;
  margin-right: auto;
  /* ~30% smaller than the global dungeon button */
  padding: 12px 18px;
  font-size: 0.78rem;
  letter-spacing: 0.1em;
  border-width: 2px;
}

.page-footer {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 10px;
  bottom: calc(10px + env(safe-area-inset-bottom));
  padding: 0 16px;

  font-family: var(--font-body);
  font-size: 12px;
  line-height: 1.25;
  color: rgba(245, 246, 242, 0.82);
  text-align: center;
  text-shadow: 0 2px 14px rgba(0, 0, 0, 0.9);
  letter-spacing: 0.02em;

  pointer-events: none;
  user-select: none;
}

@media (max-width: 420px) {
  .page-footer {
    font-size: 11px;
  }
}

/* Wolf cursor (opt-in via <body class="wolf-cursor"> in index.html) */
body.wolf-cursor {
  --wolf-cursor: url("/cursors/pata-ccw.png") 8 8;
  cursor: var(--wolf-cursor), auto;
}

/* Force the cursor everywhere so existing `cursor: pointer` rules don't override it. */
body.wolf-cursor * {
  cursor: var(--wolf-cursor), auto !important;
}

/* Keep reasonable fallbacks for common interaction states. */
body.wolf-cursor a[href],
body.wolf-cursor button,
body.wolf-cursor [role="button"],
body.wolf-cursor [onclick] {
  cursor: var(--wolf-cursor), pointer !important;
}

body.wolf-cursor input[type="text"],
body.wolf-cursor input[type="password"],
body.wolf-cursor input[type="email"],
body.wolf-cursor input[type="number"],
body.wolf-cursor textarea {
  cursor: text !important;
}

body.wolf-cursor :disabled,
body.wolf-cursor [aria-disabled="true"] {
  cursor: not-allowed !important;
}
